{% extends 'base.html' %}

{% block content %}
<div class="col-md-10 db-content">
    <div class="add-heading">
        <h3 class="heading-cm">
            <a href="" class="nav-icon me-2">
                <i class="fa-solid fa-angle-left"></i>
            </a>
            Mails<span class="sub-nav ms-2"> > All Mails</span>
        </h3>
        <p><a href="{% url 'index' %}">Compose Mail</a></p>
    </div>
â€‹
    <div class="d-flex align-items-start">
        <div class="nav flex-column nav-pills me-3 tab-nav" id="v-pills-tab" role="tablist" aria-orientation="vertical">
          <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home" aria-selected="true">Sent Mails</button>
          <button class="nav-link mt-3" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false">Draft Mails</button>
        </div>
        <div class="tab-content" id="v-pills-tabContent">
          <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab" tabindex="0">
            <table id="sampleTable" class="table hover-table mail-table" style="width:100%">
                <thead>
                    <tr>
                        <th>S. No.</th>
                        <th>Mail Subject</th>
                        <th>Description</th>
                        <th>Selected Groups</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sent_mail in sent_mails %}
                    <tr>
                        <td>{{ sent_mail.id }}</td>
                        <td>{{ sent_mail.subject }}</td>
                        <td>{{ sent_mail.content }}</td>
                        <td> {% for group in sent_mail.message_group.all %}
                            <span class="badge">{{ group.name }}
                                {% endfor %}
                            </td>
                        <td>
                            <div class="d-flex kit-action-com">
                                <div class="action-btn-pen">
                                    <a href="" method="put"><span class="material-symbols-outlined">
                                        visibility
                                        </span></a>
                                    </div>


                                    <div class="action-btn-pen">
                                        <a href="{% url 'edit_mails' sent_mail.id %}" method="put"><span class="material-symbols-outlined">
                                                edit
                                                </span></a>
                                        </div>

                                    <div class="action-btn-pen dlt-btn">
                                        <a href="" method="put" data-bs-toggle="modal" data-bs-target="#staticBackdrop"><span class="material-symbols-outlined ">
                                            delete
                                            </span></a>
                                        </div>

                                    

                                <form class="action-btn-dlt" action="" method="post">
                                    
        
                                    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered confirmation-modal">
                                            <div class="modal-content">
                                        
                                            <div class="modal-body delete-body">
                                            <span class="material-symbols-outlined delete-icon">cancel</span>
                                                <h3 class="mb-2">Are you sure ?</h3>
                                                <p>Do you really want to delete this contact ?<br>
                                            </p></div>
                                            <div class="modal-footer d-flex justify-content-center">
                                            <div class="row d-flex">
                                                <div class="col-md-12">
                                                    <button type="button" class="btn cancel-btn" data-bs-dismiss="modal">Cancel</button>
                                                    <button type="submit" class="btn btn-danger delete-btn">Delete</button>
                                                </div>
                                            </div>
                                                
                                            </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>



                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
          </div>
          <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab" tabindex="0">
            <table id="draftTable" class="table hover-table mail-table" style="width:100%">
                <thead>
                   
                    <tr>
                        <th>S. No.</th>
                        <th>Mail Subject</th>
                        <th>Description</th>
                        <th>Selected Groups</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for draft_mail in draft_mails %}
                    <tr>
                        <td>{{ draft_mail.id }}</td>
                        <td>{{draft_mail.subject }}</td>
                        <td>{{ draft_mail.content }}</td>
                        <td>
                            {% for group in draft_mail.message_group.all %}
                            <span class="badge">{{ group.name }}</span>
                            {% endfor %}
                        </td>
                        <td>
                            <div class="d-flex kit-action-com">
                                <div class="action-btn-pen">
                                    <a href="" method="put"><span class="material-symbols-outlined">
                                        visibility
                                        </span></a>
                                    </div>


                                    <div class="action-btn-pen">
                                        <a href="{% url 'edit_mails' draft_mail.id %}" method="put"><span class="material-symbols-outlined">
                                                edit
                                                </span></a>
                                        </div>

                                        <div class="action-btn-pen dlt-btn">
                                            <a href="" method="put" data-bs-toggle="modal" data-bs-target="#staticBackdrop"><span class="material-symbols-outlined ">
                                                delete
                                                </span></a>
                                            </div>

                                        

                                    <form class="action-btn-dlt" action="" method="post">
                                        
            
                                        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered confirmation-modal">
                                                <div class="modal-content">
                                            
                                                <div class="modal-body delete-body">
                                                <span class="material-symbols-outlined delete-icon">cancel</span>
                                                    <h3 class="mb-2">Are you sure ?</h3>
                                                    <p>Do you really want to delete this contact ?<br>
                                                </p></div>
                                                <div class="modal-footer d-flex justify-content-center">
                                                <div class="row d-flex">
                                                    <div class="col-md-12">
                                                        <button type="button" class="btn cancel-btn" data-bs-dismiss="modal">Cancel</button>
                                                        <button type="submit" class="btn btn-danger delete-btn">Delete</button>
                                                    </div>
                                                </div>
                                                    
                                                </div>
                                                </div>
                                            </div>
                                        </div>
                                    </form>



                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
              </div>
            </div>
          </div>

        

    </div>
</div>

</div>
</div>




{% endblock %}